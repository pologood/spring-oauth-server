<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.monkeyk.sos.domain.oauth.OauthClientDetails">
    <resultMap id="oauthClientDetailsMap" type="com.monkeyk.sos.domain.oauth.OauthClientDetails">
        <result column="client_id" property="clientId" jdbcType="VARCHAR"/>
        <result column="resource_ids" property="resourceIds" jdbcType="VARCHAR"/>
        <result column="client_secret" property="clientSecret" jdbcType="VARCHAR"/>
        <result column="scope" property="scope" jdbcType="VARCHAR"/>
        <result column="authorized_grant_types" property="authorizedGrantTypes" jdbcType="VARCHAR"/>
        <result column="web_server_redirect_uri" property="webServerRedirectUri" jdbcType="VARCHAR"/>
        <result column="authorities" property="authorities" jdbcType="VARCHAR"/>

        <result column="access_token_validity" property="accessTokenValidity" jdbcType="INTEGER"/>
        <result column="refresh_token_validity" property="refreshTokenValidity" jdbcType="INTEGER"/>
        <result column="additional_information" property="additionalInformation" jdbcType="VARCHAR"/>

        <result column="create_time" property="createTime" jdbcType="DATE"/>
        <result column="archived" property="archived" jdbcType="TINYINT"/>
        <result column="trusted" property="trusted" jdbcType="TINYINT"/>
        <result column="autoapprove" property="autoApprove" jdbcType="VARCHAR"/>

    </resultMap>

    <insert id="insert" parameterType="com.monkeyk.sos.domain.oauth.OauthClientDetails">
        insert into oauth_client_details
        (client_id, resource_ids, client_secret, scope, authorized_grant_types,
        web_server_redirect_uri,authorities, access_token_validity,
        refresh_token_validity, additional_information, create_time, archived, trusted)
        values
        (#{clientId},#{resourceIds},#{clientSecret},#{scope},#{authorizedGrantTypes},#{webServerRedirectUri},#{authorities},
        #{accessTokenValidity},#{refreshTokenValidity},#{additionalInformation},#{createTime},#{archived},#{trusted})
    </insert>

    <delete id="deleteById" parameterType="String">
        update oauth_client_details set archived  = 1 where client_id = #{clientId}
    </delete>

    <update id="update" parameterType="com.monkeyk.sos.domain.oauth.OauthClientDetails">
        update oauth_client_details
        <set>
            <if test="archived != null">
                archived = #{archived},
            </if>
        </set>
        where client_id = #{clientId};

    </update>

    <select id="findById" parameterType="String" resultMap="oauthClientDetailsMap">

        select * from oauth_client_details where client_id = #{clientId}
    </select>

    <select id="findAll" resultMap="oauthClientDetailsMap">
        select * from oauth_client_details order by create_time desc
    </select>


</mapper>
